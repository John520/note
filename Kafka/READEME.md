# 为什么性能好？

1. 利用partition 并行处理：不同partition 可能位于不同的机器，即便位于相同的机器，也是在不同的文件路径，可以并行处理
2. 顺序写磁盘：数据在相同分区是能保证有序性，且相同partition数据是一直追加的方式
3. 充分利用page cache: 数据只写入操作系统文件缓存，并不需要flush 到磁盘，保证了高性能。至于宕机数据丢失，则是通过replication 来保证，及若每个分区有3个从节点，那么主节点将数据都同步到3个从节点都才返回，3个从节点全部宕机丢失数据的概率太低了
4. 零拷贝： producer-->broker-->consumer 数据流向，linux 2.6之后的sendfile 接口会是的将原本四次上下文切换和四次拷贝变成两次上下文切换两次内存拷贝

5. 批处理pipeline： 累积多条消息一次传输，提高带宽利用率
6. 数据压缩：数据压缩之后在发送给brokerz