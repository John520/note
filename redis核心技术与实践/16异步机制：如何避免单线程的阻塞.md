#异步机制
## 影响redis性能的几大因素？
1. redis 内部的阻塞操作
2. CPU核 与 NUMA 架构
3. redis 的关键配置
4. redis 内存碎片
5. redis 缓冲区

## redis 实例阻塞点有哪些？
1. 客户端： 网络IO,key-value 增删改查(O(N)复杂度操作，如HGetAll,集合求交/并/差等),数据库操作（flushDB,flushAll）
2. 磁盘：生成RDB,持久化AOF,AOF重写
3. 主从结构：主库生成RDB文件，从库接受RDB文件，清空数据库，加载数据库
4. 集群架构：哈希槽信息的传输和数据迁移

## 阻塞点概括？那些可以异步化
* 集合的全量查询和集合的聚合操作（不可异步化）
* `bigkey` 的删除（操作系统需要找到空闲列表，以便后续内存管理使用，这里会阻塞应用）（可异步化）
* 清空数据库  （可异步化）
* AOF 日志同步写 （可异步化）
* 从库加载RDB文件 （不可异步化）
* 若选择 redis cluster 方案（非codis）,`bigkey`在迁移时会阻塞主线程

redis 主线程启动后，会启动三个子线程，分别来处理：
* AOF 日志同步写
* 键值对删除（redis 4.0后才有，之前的可以采用渐进删除的方式）
* 文件关闭

## 优化点
* 集合可以取到本地应用做聚合
* RDB 文件大小控制在 2-4G,可以获得比较好的加载速度
* `bigkey`删除可以分多次删除，一次删除一部分
